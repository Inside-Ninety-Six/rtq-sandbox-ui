<!DOCTYPE html>
<html lang="en" class="antialiased">
<head>
  <!-- RTQ_RUN {"generator":"rtq-prototype-batch","model":"gemini-3-pro-preview","prefix":"gemini.stage-12.1","variant":"AB","indexWithinVariant":"124","totalWithinVariant":"200","hueFamily":"red","intensityMode":"","timestamp":"2026-01-07T05:57:17.084Z"} -->
  <meta name="rtq-run" content='{&quot;generator&quot;:&quot;rtq-prototype-batch&quot;,&quot;model&quot;:&quot;gemini-3-pro-preview&quot;,&quot;prefix&quot;:&quot;gemini.stage-12.1&quot;,&quot;variant&quot;:&quot;AB&quot;,&quot;indexWithinVariant&quot;:&quot;124&quot;,&quot;totalWithinVariant&quot;:&quot;200&quot;,&quot;hueFamily&quot;:&quot;red&quot;,&quot;intensityMode&quot;:&quot;&quot;,&quot;timestamp&quot;:&quot;2026-01-07T05:57:17.084Z&quot;}'>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RTQ Maths Paper Solution Viewer</title>

    <!-- Tailwind CSS (via CDN for prototype) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'system-ui', '-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'Roboto', 'Helvetica Neue', 'Arial', 'sans-serif'],
                    },
                    colors: {
                        // ColorLab B: FORCED HUE FAMILY = RED
                        // Defining a neutral palette (Zinc) and a Red accent palette.
                        brand: {
                            50: '#fef2f2',
                            100: '#fee2e2',
                            200: '#fecaca',
                            300: '#fca5a5',
                            400: '#f87171',
                            500: '#ef4444',
                            600: '#dc2626', // Primary Accent
                            700: '#b91c1c', // Darker Accent
                            800: '#991b1b',
                            900: '#7f1d1d',
                        },
                        neutral: {
                            50: '#fafafa',
                            100: '#f4f4f5',
                            200: '#e4e4e7',
                            300: '#d4d4d8', // Hairlines
                            400: '#a1a1aa',
                            500: '#71717a',
                            600: '#52525b', // Secondary Text
                            700: '#3f3f46',
                            800: '#27272a',
                            900: '#18181b', // Primary Text
                        }
                    }
                }
            }
        }
    </script>

    <!-- KaTeX CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <style>
        /* Base / Reset overrides */
        body {
            background-color: #fafafa; /* neutral-50 */
            color: #18181b; /* neutral-900 */
        }

        /* Focus Styles (Stage 5.5.2) - Custom Red Focus */
        :focus-visible {
            outline: 2px solid #dc2626; /* brand-600 */
            outline-offset: 2px;
        }

        /* Scrollbar hiding for Nav (Stage 6 Add-on) */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        /* KaTeX Containment Invariant (Stage 3 & 6) */
        .katex-display {
            overflow-x: auto;
            overflow-y: hidden;
            padding-top: 0.25rem;
            padding-bottom: 0.25rem;
            max-width: 100%;
            -webkit-overflow-scrolling: touch;
        }
        
        /* Inline KaTeX background rule: Transparent */
        .katex {
            background-color: transparent !important;
        }
        
        /* Block-level math underlay rule (optional but permitted) - utilizing subtle neutral */
        .katex-display {
            /* No heavy background, just transparent or extremely subtle if needed. 
               Stage 5.8 says "subtle differentiation for block-level math only".
               Using transparent to be safe and paper-like unless overflow requires cue. */
             background-color: transparent;
        }

        /* Typography & Spacing Rhythm */
        .prose p {
            margin-bottom: 1rem;
            line-height: 1.6;
        }
        .prose p:last-child {
            margin-bottom: 0;
        }

        /* Solution Details Transition (Stage 5.5.3) */
        .details-content {
            transition: all 0.2s ease-in-out;
            overflow: hidden;
        }
        .details-content[aria-hidden="true"] {
            max-height: 0;
            opacity: 0;
            margin-top: 0;
            visibility: hidden;
        }
        .details-content[aria-hidden="false"] {
            max-height: 5000px; /* Arbitrary large height for transition */
            opacity: 1;
            margin-top: 1rem;
            visibility: visible;
        }
        
        /* Markdown Tables (Stage 5.8.5) */
        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.95rem;
            margin-top: 0.75rem;
            margin-bottom: 0.75rem;
        }
        th, td {
            border: 1px solid #e4e4e7; /* neutral-200 */
            padding: 0.5rem 0.75rem;
            text-align: left;
        }
        th {
            font-weight: 600;
            background-color: transparent;
        }

        /* Navigation Sticky Cue (Stage 3) */
        .nav-sticky-rail {
            position: sticky;
            top: 1rem;
            max-height: calc(100vh - 2rem);
            overflow-y: auto;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <!-- STAGE 3: Top Controls Region -->
    <!-- Aligned with DocumentFrameShell horizontally -->
    <div class="w-full bg-neutral-50 border-b border-neutral-200 sticky top-0 z-20">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-14 flex items-center justify-between">
            <div class="flex items-center gap-4">
                <!-- Mobile Jump To Trigger -->
                <button id="mobile-menu-trigger" class="lg:hidden p-2 -ml-2 text-neutral-600 hover:text-brand-600 transition-colors" aria-label="Jump to question">
                    <!-- Menu Icon -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="4" y1="12" x2="20" y2="12"/><line x1="4" y1="6" x2="20" y2="6"/><line x1="4" y1="18" x2="20" y2="18"/></svg>
                </button>
                
                <!-- Paper Selector -->
                <div class="flex items-center gap-2">
                    <label for="paper-select" class="text-sm font-medium text-neutral-500 sr-only">Select Paper</label>
                    <select id="paper-select" class="form-select text-sm font-medium text-neutral-900 bg-transparent border border-neutral-300 rounded-md py-1.5 pl-3 pr-8 focus:border-brand-600 focus:ring-brand-600 cursor-pointer">
                        <option value="" disabled selected>Loading papers...</option>
                    </select>
                </div>
            </div>
            
            <div class="text-xs text-neutral-400 font-medium">RTQ Prototype v11.3</div>
        </div>
    </div>

    <!-- STAGE 3: DocumentFrameShell -->
    <div class="flex-grow w-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 lg:py-10">
        <div class="lg:grid lg:grid-cols-[220px_1fr] lg:gap-12 items-start relative">
            
            <!-- LEFT COLUMN: Navigation Rail (Desktop) -->
            <nav id="desktop-nav" class="hidden lg:block nav-sticky-rail no-scrollbar pr-4" aria-label="Paper navigation">
                <!-- Nav content generated via JS -->
            </nav>

            <!-- RIGHT COLUMN: Paper Document Content -->
            <main id="paper-content" class="min-h-[50vh] w-full max-w-3xl">
                <!-- Content generated via JS -->
                <div class="text-center text-neutral-400 py-20 animate-pulse">Loading paper content...</div>
            </main>

        </div>
    </div>

    <!-- STAGE 3: Mobile Navigation Drawer -->
    <div id="mobile-drawer-backdrop" class="fixed inset-0 bg-neutral-900/50 z-40 hidden transition-opacity opacity-0" aria-hidden="true"></div>
    <div id="mobile-drawer" class="fixed inset-y-0 left-0 w-64 bg-white z-50 transform -translate-x-full transition-transform duration-300 ease-in-out shadow-xl flex flex-col" aria-hidden="true">
        <div class="p-4 border-b border-neutral-100 flex items-center justify-between">
            <h2 class="text-sm font-bold text-neutral-900">Jump to</h2>
            <button id="mobile-drawer-close" class="p-2 -mr-2 text-neutral-500 hover:text-brand-600">
                <span class="sr-only">Close navigation</span>
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
            </button>
        </div>
        <nav id="mobile-nav-list" class="flex-1 overflow-y-auto p-4 no-scrollbar">
            <!-- Nav content cloned via JS -->
        </nav>
    </div>

    <!-- EXTERNAL LIBRARIES -->
    <script src="https://cdn.jsdelivr.net/npm/markdown-it@14.1.0/dist/markdown-it.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>

    <!-- APPLICATION LOGIC -->
    <script>
        // --- STAGE 0: CONSTANTS ---
        const RTQ_PAPERS_PAYLOAD_PATH = "../../../payload/rtq.papers.payload.v2.json";

        // --- GLOBAL STATE ---
        let papersData = [];
        let currentPaper = null;
        let isDrawerOpen = false;

        // --- MARKDOWN SETUP (Stage 6 Add-on) ---
        // html: true (SVG passthrough), breaks: false (critical for KaTeX), no escape rule.
        const md = window.markdownit ? window.markdownit({
            html: true,
            linkify: true,
            breaks: false,
            typographer: true 
        }) : null;

        if (md) {
            // Disable escape rule to preserve TeX backslashes
            md.inline.ruler.disable(['escape']);
        }

        // --- UTILS ---
        
        // Render Math helper
        function renderMath(element) {
            if (!window.renderMathInElement) return;
            renderMathInElement(element, {
                delimiters: [
                    {left: '$$', right: '$$', display: true},
                    {left: '$', right: '$', display: false}
                ],
                throwOnError: false
            });
        }

        // Safe Markdown render
        function renderMarkdown(text) {
            if (!text) return '';
            if (!md) return text; // Fallback
            return md.render(text);
        }

        // --- RENDERERS ---

        function renderPaperSelector() {
            const select = document.getElementById('paper-select');
            select.innerHTML = '';
            
            papersData.forEach(paper => {
                const option = document.createElement('option');
                option.value = paper.key;
                option.textContent = paper.label;
                select.appendChild(option);
            });

            select.addEventListener('change', (e) => {
                loadPaper(e.target.value);
            });
        }

        function buildNavHTML(paper) {
            let html = '<ul class="flex flex-col gap-1 pb-10">';
            
            // Handle sections if present
            if (paper.sections) {
                paper.sections.forEach(section => {
                    // Render Section Label if not empty (Stage 5.4.6)
                    if (section.label && section.label.trim() !== '') {
                        html += `
                            <li class="mt-4 mb-2 first:mt-0">
                                <span class="text-xs font-bold text-neutral-400 uppercase tracking-wider block px-2 select-none">
                                    ${section.label}
                                </span>
                            </li>
                        `;
                    }
                    // Render questions in section
                    section.questions.forEach(q => {
                        html += buildNavItemHTML(q);
                    });
                });
            } else if (paper.questions) {
                // Flat questions list
                paper.questions.forEach(q => {
                    html += buildNavItemHTML(q);
                });
            }
            
            html += '</ul>';
            return html;
        }

        function buildNavItemHTML(node, depth = 0) {
            let html = '';
            
            // Only render identifiers in nav
            const isSub = depth > 0;
            // Hierarchy via type scale only (Stage 5.4.5)
            const classes = isSub 
                ? "text-sm text-neutral-500 font-normal pl-2" // Sub-questions slightly smaller/lighter
                : "text-base text-neutral-600 font-medium pl-2"; // Top level
            
            const activeClass = "text-brand-600 font-bold bg-neutral-100 rounded-md"; // ColorLab B Red active state

            html += `
                <li>
                    <a href="#q-${node.id}" 
                       class="block py-1.5 hover:text-brand-600 hover:bg-neutral-50 rounded-md transition-colors duration-200 nav-link ${classes}"
                       data-target="q-${node.id}">
                       ${node.id}
                    </a>
                </li>
            `;

            // Recursively add children to the flattened list logic (though structure implies recursive, nav is linear list)
            if (node.children && node.children.length > 0) {
                node.children.forEach(child => {
                    html += buildNavItemHTML(child, depth + 1);
                });
            }

            return html;
        }

        function renderNav(paper) {
            const navHTML = buildNavHTML(paper);
            document.getElementById('desktop-nav').innerHTML = navHTML;
            document.getElementById('mobile-nav-list').innerHTML = navHTML;

            // Nav interactions
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const targetId = link.getAttribute('data-target');
                    const targetEl = document.getElementById(targetId);
                    
                    // Close drawer if open
                    if(isDrawerOpen) toggleDrawer(false);

                    if (targetEl) {
                        // Smooth scroll with offset for header
                        const headerOffset = 80;
                        const elementPosition = targetEl.getBoundingClientRect().top;
                        const offsetPosition = elementPosition + window.pageYOffset - headerOffset;
                        
                        window.scrollTo({
                            top: offsetPosition,
                            behavior: "smooth"
                        });
                        
                        // Set active state visually
                        updateActiveNav(targetId);
                        
                        // Focus for accessibility
                        targetEl.focus({preventScroll:true});
                    }
                });
            });
        }

        function updateActiveNav(activeId) {
            document.querySelectorAll('.nav-link').forEach(link => {
                const isActive = link.getAttribute('data-target') === activeId;
                if (isActive) {
                    link.classList.add('text-brand-600', 'font-bold', 'bg-neutral-50');
                    link.classList.remove('text-neutral-600', 'text-neutral-500', 'font-medium', 'font-normal');
                } else {
                    link.classList.remove('text-brand-600', 'font-bold', 'bg-neutral-50');
                    // Reset to default based on depth (inferred from classList check/reset is complex, simple toggle preferred)
                    // Simplified: just remove active classes.
                    // The original classes are static; we just toggle the active override.
                    // Ideally we revert to specific depth classes, but for this prototype, removing active styling is key.
                    // Let's rely on the base classes remaining and just toggle the specific 'active' modifier classes.
                }
            });
        }

        function buildPaperContentHTML(paper) {
            let html = '<div class="space-y-12 pb-20">'; // Top level spacing (Stage 5.1: largest unit)

            if (paper.sections) {
                paper.sections.forEach(section => {
                    html += `<section class="space-y-12">`;
                    // Section Header (Stage 3)
                    if (section.label && section.label.trim() !== '') {
                        html += `
                            <div class="border-b border-neutral-200 pb-4 mb-8">
                                <h2 class="text-xl font-bold text-neutral-900">${section.label}</h2>
                            </div>
                        `;
                    }
                    section.questions.forEach((q, idx) => {
                        html += renderQuestionNode(q, 0, idx === 0);
                    });
                    html += `</section>`;
                    // Separator between sections handled by space-y-12 of container
                });
            } else if (paper.questions) {
                paper.questions.forEach((q, idx) => {
                    html += renderQuestionNode(q, 0, idx === 0);
                });
            }

            html += '</div>';
            return html;
        }

        function renderQuestionNode(node, depth = 0, isFirst = false) {
            const isTopLevel = depth === 0;
            const paddingClass = depth > 0 ? 'pl-4 sm:pl-8 border-l border-neutral-100' : ''; // Indentation for children (Stage 3)
            const marginClass = isTopLevel && !isFirst ? 'mt-16 pt-8 border-t border-neutral-100' : 'mt-8'; // Vertical separation

            // Defaults
            const defaults = currentPaper.defaults || {};
            const expandedAll = defaults.expandedAll !== false; // Default true unless false
            const solutionBlock = node.solutionBlock;
            const hasSolutionDetails = solutionBlock && solutionBlock.solutionDetails;
            
            // Unique ID for disclosure
            const disclosureId = `details-${node.id.replace(/[^a-zA-Z0-9]/g, '-')}`;

            let html = `
                <div id="q-${node.id}" class="question-node scroll-mt-24 ${marginClass} ${paddingClass} group" tabindex="-1">
                    
                    <!-- Question Body -->
                    <div class="flex gap-3 items-baseline">
                        <span class="text-neutral-500 font-semibold text-sm shrink-0 select-none">${node.id}</span>
                        <div class="prose prose-neutral max-w-none text-neutral-900 font-medium text-lg leading-relaxed">
                            ${renderMarkdown(node.question)}
                        </div>
                    </div>

                    <!-- Solution Block -->
                    ${solutionBlock ? `
                        <div class="mt-4 pl-[calc(1.5rem+0.75rem)]"> <!-- Align with text start -->
                            
                            <!-- Answer (Stage 3: Visible by default if present) -->
                            ${solutionBlock.answer ? `
                                <div class="mb-4">
                                    <div class="text-xs font-bold text-neutral-500 uppercase tracking-wide mb-1">Answer</div>
                                    <div class="prose prose-neutral text-neutral-900 font-medium">
                                        ${renderMarkdown(solutionBlock.answer)}
                                    </div>
                                </div>
                            ` : ''}

                            <!-- Solution Details (Progressive Disclosure) -->
                            ${hasSolutionDetails ? `
                                <div>
                                    <button 
                                        type="button" 
                                        class="flex items-center gap-2 text-sm font-semibold text-brand-600 hover:text-brand-700 transition-colors focus:outline-none disclosure-trigger"
                                        aria-expanded="${expandedAll}"
                                        aria-controls="${disclosureId}"
                                    >
                                        <span class="btn-text">${expandedAll ? 'Hide working' : 'Show working'}</span>
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="transform transition-transform duration-200 ${expandedAll ? 'rotate-180' : ''}"><polyline points="6 9 12 15 18 9"/></svg>
                                    </button>

                                    <div id="${disclosureId}" class="details-content" aria-hidden="${!expandedAll}">
                                        <div class="pt-4 space-y-6 text-neutral-600 text-base leading-relaxed relative">
                                            <!-- Optional: Subtle wash for region if needed, adhering to pure spacing for now per Stage 5.1 grouping -->
                                            
                                            <!-- Keep in mind -->
                                            ${solutionBlock.solutionDetails.keepInMind ? `
                                                <div class="bg-neutral-50 p-4 rounded-sm border-l-2 border-neutral-300">
                                                    <div class="text-xs font-bold text-neutral-500 uppercase mb-2">Keep in mind</div>
                                                    <div class="prose prose-sm prose-neutral">
                                                        ${renderMarkdown(solutionBlock.solutionDetails.keepInMind)}
                                                    </div>
                                                </div>
                                            ` : ''}

                                            <!-- Formulas Used -->
                                            ${solutionBlock.solutionDetails.formulasUsed ? `
                                                <div class="pl-4 border-l border-neutral-200">
                                                    <div class="text-xs font-bold text-neutral-400 uppercase mb-2">Formulas used</div>
                                                    <div class="prose prose-sm prose-neutral">
                                                        ${renderMarkdown(solutionBlock.solutionDetails.formulasUsed)}
                                                    </div>
                                                </div>
                                            ` : ''}

                                            <!-- Working (Primary) -->
                                            ${solutionBlock.solutionDetails.working ? `
                                                <div>
                                                    <div class="text-xs font-bold text-neutral-500 uppercase mb-2">Working</div>
                                                    <div class="prose prose-neutral text-neutral-700">
                                                        ${renderMarkdown(solutionBlock.solutionDetails.working)}
                                                    </div>
                                                </div>
                                            ` : ''}

                                            <!-- Alternative Working -->
                                            ${solutionBlock.solutionDetails.alternativeWorking && solutionBlock.solutionDetails.alternativeWorking.length > 0 ? 
                                                solutionBlock.solutionDetails.alternativeWorking.map(alt => `
                                                    <div class="pt-6 mt-6 border-t border-dashed border-neutral-200">
                                                        <div class="text-xs font-bold text-neutral-500 uppercase mb-2">Alternative working</div>
                                                        <div class="prose prose-neutral text-neutral-700">
                                                            ${renderMarkdown(alt)}
                                                        </div>
                                                    </div>
                                                `).join('')
                                            : ''}
                                        </div>
                                    </div>
                                </div>
                            ` : ''}
                        </div>
                    ` : ''}

                    <!-- Children Recursion -->
                    ${node.children && node.children.length > 0 ? `
                        <div class="mt-6 children-container">
                            ${node.children.map(child => renderQuestionNode(child, depth + 1)).join('')}
                        </div>
                    ` : ''}
                </div>
            `;
            return html;
        }

        // --- INTERACTION LOGIC ---

        function setupDisclosureHandlers() {
            document.querySelectorAll('.disclosure-trigger').forEach(btn => {
                btn.addEventListener('click', () => {
                    const isExpanded = btn.getAttribute('aria-expanded') === 'true';
                    const newState = !isExpanded;
                    const controlsId = btn.getAttribute('aria-controls');
                    const contentDiv = document.getElementById(controlsId);
                    const btnText = btn.querySelector('.btn-text');
                    const icon = btn.querySelector('svg');

                    btn.setAttribute('aria-expanded', newState);
                    contentDiv.setAttribute('aria-hidden', !newState);
                    btnText.textContent = newState ? 'Hide working' : 'Show working';
                    
                    if (newState) {
                        icon.classList.add('rotate-180');
                    } else {
                        icon.classList.remove('rotate-180');
                    }
                });
            });
        }

        function toggleDrawer(open) {
            isDrawerOpen = open;
            const drawer = document.getElementById('mobile-drawer');
            const backdrop = document.getElementById('mobile-drawer-backdrop');
            const body = document.body;

            if (open) {
                backdrop.classList.remove('hidden');
                // trigger reflow
                void backdrop.offsetWidth; 
                backdrop.classList.remove('opacity-0');
                
                drawer.classList.remove('hidden');
                setTimeout(() => {
                    drawer.classList.remove('-translate-x-full');
                }, 10);
                
                body.style.overflow = 'hidden'; // Prevent body scroll
            } else {
                drawer.classList.add('-translate-x-full');
                backdrop.classList.add('opacity-0');
                
                setTimeout(() => {
                    drawer.classList.add('hidden');
                    backdrop.classList.add('hidden');
                    body.style.overflow = '';
                }, 300);
            }
        }

        function loadPaper(key) {
            currentPaper = papersData.find(p => p.key === key);
            if (!currentPaper) return;

            // Render Nav
            renderNav(currentPaper);

            // Render Content
            const contentEl = document.getElementById('paper-content');
            contentEl.innerHTML = buildPaperContentHTML(currentPaper);

            // Init Interactions & Math
            setupDisclosureHandlers();
            renderMath(contentEl);
            
            // Scroll to top
            window.scrollTo(0, 0);
        }

        async function init() {
            try {
                const response = await fetch(RTQ_PAPERS_PAYLOAD_PATH);
                if (!response.ok) throw new Error('Failed to load payload');
                
                const data = await response.json();
                papersData = data.papers;

                if (!papersData || papersData.length === 0) throw new Error('No papers in payload');

                // Initial Render
                renderPaperSelector();
                loadPaper(papersData[0].key); // Load first paper by default

                // Mobile Drawer Listeners
                document.getElementById('mobile-menu-trigger').addEventListener('click', () => toggleDrawer(true));
                document.getElementById('mobile-drawer-close').addEventListener('click', () => toggleDrawer(false));
                document.getElementById('mobile-drawer-backdrop').addEventListener('click', () => toggleDrawer(false));

            } catch (error) {
                console.error(error);
                // Failure Mode (Stage 3/6)
                document.getElementById('paper-content').innerHTML = `
                    <div class="flex items-center justify-center h-64 border-2 border-dashed border-neutral-300 rounded-lg">
                        <p class="text-neutral-500 font-bold">PAPERS PAYLOAD MISSING</p>
                    </div>
                `;
            }
        }

        // Start
        init();

    </script>
</body>
</html>

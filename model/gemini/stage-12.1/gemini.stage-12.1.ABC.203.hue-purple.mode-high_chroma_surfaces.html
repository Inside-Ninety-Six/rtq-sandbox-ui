<!DOCTYPE html>
<html lang="en">
<head>
  <!-- RTQ_RUN {"generator":"rtq-prototype-batch","model":"gemini-3-pro-preview","prefix":"gemini.stage-12.1","variant":"ABC","indexWithinVariant":"203","totalWithinVariant":"320","hueFamily":"purple","intensityMode":"high_chroma_surfaces","timestamp":"2026-01-07T18:50:00.189Z"} -->
  <meta name="rtq-run" content='{&quot;generator&quot;:&quot;rtq-prototype-batch&quot;,&quot;model&quot;:&quot;gemini-3-pro-preview&quot;,&quot;prefix&quot;:&quot;gemini.stage-12.1&quot;,&quot;variant&quot;:&quot;ABC&quot;,&quot;indexWithinVariant&quot;:&quot;203&quot;,&quot;totalWithinVariant&quot;:&quot;320&quot;,&quot;hueFamily&quot;:&quot;purple&quot;,&quot;intensityMode&quot;:&quot;high_chroma_surfaces&quot;,&quot;timestamp&quot;:&quot;2026-01-07T18:50:00.189Z&quot;}'>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RTQ Maths Paper Solution Viewer</title>

    <!-- Tailwind CSS (via CDN script for prototyping) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- KaTeX CSS (No SRI) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    
    <!-- KaTeX JS (No SRI) -->
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>
    
    <!-- Markdown-it (No SRI) -->
    <script src="https://cdn.jsdelivr.net/npm/markdown-it@14.0.0/dist/markdown-it.min.js"></script>

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- ColorLab & Layout Configuration -->
    <style>
        /* 
         * STAGE 6 ADD-ON: COLORLAB C - HIGH CHROMA SURFACES (PURPLE)
         * Hue Family: Purple (~290)
         * Intensity Mode: high_chroma_surfaces
         * Rules: 
         * - 2 major surfaces C in [0.06..0.12]
         * - 1 major surface C in [0.03..0.07]
         * - Text C <= 0.015
         * - Accent C in [0.12..0.20]
         */
        :root {
            /* Base Hue: 290 (Purple) */
            
            /* Major Surfaces */
            /* Page Background: C=0.06 (Tinted) */
            --color-bg-page: oklch(0.96 0.06 290);
            
            /* Frame Base: C=0.08 (Chromatic) */
            --color-bg-frame: oklch(0.93 0.08 290);
            
            /* Paper Surface: C=0.035 (Readable/Cleaner) */
            --color-bg-paper: oklch(0.99 0.035 290);

            /* Solution Details Wash: C=0.05 (Distinct region) */
            --color-bg-wash: oklch(0.96 0.05 290);

            /* Text */
            --color-text-primary: oklch(0.20 0.015 290);
            --color-text-secondary: oklch(0.45 0.02 290);
            --color-text-nav: oklch(0.40 0.02 290);
            --color-text-nav-active: oklch(0.20 0.02 290);

            /* Dividers */
            --color-divider: oklch(0.88 0.04 290);

            /* Accents (Interactive/Focus only) */
            /* Accent C=0.18 */
            --color-accent: oklch(0.55 0.18 290);
            --color-focus: oklch(0.55 0.18 290);

            /* Spacing Units */
            --space-unit: 1rem;
        }

        /* Utility Class mappings to Variables */
        .bg-page { background-color: var(--color-bg-page); }
        .bg-frame { background-color: var(--color-bg-frame); }
        .bg-paper { background-color: var(--color-bg-paper); }
        .bg-wash { background-color: var(--color-bg-wash); }
        
        .text-primary-custom { color: var(--color-text-primary); }
        .text-secondary-custom { color: var(--color-text-secondary); }
        .text-accent { color: var(--color-accent); }
        
        .border-divider { border-color: var(--color-divider); }
        .border-focus { outline-color: var(--color-focus); }

        /* Global Reset & Typography */
        body {
            font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            color: var(--color-text-primary);
            background-color: var(--color-bg-page);
            -webkit-font-smoothing: antialiased;
            overflow-y: scroll; /* Always show vertical scrollbar to prevent shift */
        }

        /* Focus Styles */
        :focus-visible {
            outline: 2px solid var(--color-focus);
            outline-offset: 2px;
            border-radius: 2px;
        }

        /* KaTeX Overrides (Containment & Transparency) */
        .katex-display {
            overflow-x: auto;
            overflow-y: hidden;
            padding-bottom: 4px; /* Space for scrollbar */
            margin: 1em 0;
            max-width: 100%;
            -webkit-overflow-scrolling: touch;
        }
        
        /* Inline math must have transparent background */
        .katex {
            background-color: transparent !important;
        }

        /* Scrollbar Hiding for Nav (Stage 6 Add-on) */
        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }

        /* Layout Utilities */
        .layout-shell {
            max-width: 1200px; /* Desktop constrained width */
            margin: 0 auto;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .desktop-cols {
            display: flex;
            flex-direction: row;
            gap: 2rem;
            padding: 0 1rem;
            flex-grow: 1;
        }

        /* Markdown Content Styling */
        .md-content p { margin-bottom: 0.75em; line-height: 1.6; }
        .md-content p:last-child { margin-bottom: 0; }
        .md-content ul { list-style-type: disc; padding-left: 1.25em; margin-bottom: 0.75em; }
        .md-content ol { list-style-type: decimal; padding-left: 1.25em; margin-bottom: 0.75em; }
        .md-content table { 
            width: 100%; 
            border-collapse: collapse; 
            margin: 1em 0; 
            font-size: 0.95em; 
        }
        .md-content th, .md-content td { 
            border: 1px solid var(--color-divider); 
            padding: 0.5em; 
            text-align: left; 
        }
        .md-content th { font-weight: 600; }

        /* Animation for Expand/Collapse */
        .reveal-content {
            transition: opacity 0.2s ease-out, max-height 0.3s ease-out;
            overflow: hidden;
        }
        .reveal-content.hidden {
            display: none; /* Fallback */
        }
        
        /* Mobile Drawer styling */
        .drawer-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.2);
            z-index: 40;
            opacity: 0;
            transition: opacity 0.2s;
            pointer-events: none;
        }
        .drawer-overlay.open {
            opacity: 1;
            pointer-events: auto;
        }
        .drawer-panel {
            position: fixed;
            top: 0;
            left: 0;
            bottom: 0;
            width: 80%;
            max-width: 300px;
            background-color: var(--color-bg-page);
            z-index: 50;
            transform: translateX(-100%);
            transition: transform 0.25s cubic-bezier(0.16, 1, 0.3, 1);
            box-shadow: 2px 0 8px rgba(0,0,0,0.05);
        }
        .drawer-panel.open {
            transform: translateX(0);
        }

        /* Navigation Typography */
        .nav-item {
            display: block;
            padding: 0.25rem 0;
            font-size: 0.9rem;
            color: var(--color-text-nav);
            text-decoration: none;
            border-left: 2px solid transparent;
            padding-left: 0.75rem;
            margin-left: -2px; /* Pull border onto line */
            transition: color 0.15s, border-color 0.15s;
        }
        .nav-item:hover {
            color: var(--color-text-primary);
            border-left-color: var(--color-divider);
        }
        .nav-item.active {
            font-weight: 600;
            color: var(--color-text-nav-active);
            border-left-color: var(--color-accent); /* Accent allowed for Nav Current Marker */
        }
        .nav-section-label {
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--color-text-secondary);
            margin-top: 1.5rem;
            margin-bottom: 0.5rem;
            padding-left: 0.75rem;
        }
    </style>
</head>
<body class="bg-page">

    <!-- Top Controls Region (Aligned to shell) -->
    <div class="w-full bg-frame border-b border-divider sticky top-0 z-30">
        <div class="layout-shell px-4 py-3 flex items-center justify-between h-14">
            <!-- Paper Selector -->
            <div class="flex items-center gap-3">
                <label for="paper-select" class="text-sm font-medium text-secondary-custom hidden sm:block">Paper</label>
                <select id="paper-select" class="bg-paper border border-divider text-sm text-primary-custom rounded px-2 py-1.5 focus:border-accent focus:ring-1 focus:ring-accent outline-none">
                    <option value="" disabled selected>Loading papers...</option>
                </select>
            </div>

            <!-- Mobile Jump To Trigger -->
            <button id="mobile-menu-trigger" class="lg:hidden flex items-center gap-2 text-sm font-medium text-accent px-3 py-1.5 rounded hover:bg-wash focus:bg-wash transition-colors">
                <i data-lucide="menu" class="w-4 h-4"></i>
                <span>Jump to</span>
            </button>
        </div>
    </div>

    <!-- Main Application Shell -->
    <div class="layout-shell bg-frame">
        <div class="desktop-cols pt-8 pb-20">
            
            <!-- Desktop Navigation Rail (Left Column) -->
            <aside class="hidden lg:block w-48 flex-shrink-0 relative">
                <div class="sticky top-20 max-h-[calc(100vh-6rem)] overflow-y-auto scrollbar-hide pr-2" id="desktop-nav-container">
                    <!-- Nav generated here -->
                </div>
            </aside>

            <!-- Paper Content Column (Right Column - Primary) -->
            <main class="flex-grow min-w-0" id="paper-content">
                <div id="loading-indicator" class="text-center py-20 text-secondary-custom">
                    Loading payload...
                </div>
            </main>

        </div>
    </div>

    <!-- Mobile Navigation Drawer -->
    <div id="drawer-overlay" class="drawer-overlay"></div>
    <div id="drawer-panel" class="drawer-panel flex flex-col">
        <div class="flex items-center justify-between p-4 border-b border-divider">
            <h2 class="font-semibold text-lg">Jump to</h2>
            <button id="drawer-close" class="p-2 text-secondary-custom hover:text-primary-custom rounded">
                <i data-lucide="x" class="w-5 h-5"></i>
            </button>
        </div>
        <div id="mobile-nav-container" class="flex-1 overflow-y-auto p-4">
            <!-- Mobile nav generated here -->
        </div>
    </div>

    <script>
        // --- STAGE 0: CONSTANTS (Canonical) ---
        const RTQ_PAPERS_PAYLOAD_PATH = "../../../payload/rtq.papers.payload.v2.json";
        const RTQ_SHADCN_TOKEN_PROFILES_PATH = "../../../payload/rtq.shadcn.token.profiles.v1.json";

        // --- State ---
        let payload = null;
        let currentPaperKey = null;
        let expandedStates = {}; // Map: questionId -> boolean

        // --- Markdown Renderer Configuration (Authoritative) ---
        const md = window.markdownit ? window.markdownit({
            html: true,    // Allow inline SVG passthrough
            linkify: true,
            breaks: false  // MUST stay false: prevents <br> in math
        }) : null;

        if (md) {
            md.inline.ruler.disable(['escape']); // Preserve TeX backslashes
        }

        // --- DOM Elements ---
        const dom = {
            paperSelect: document.getElementById('paper-select'),
            paperContent: document.getElementById('paper-content'),
            desktopNav: document.getElementById('desktop-nav-container'),
            mobileNav: document.getElementById('mobile-nav-container'),
            drawerOverlay: document.getElementById('drawer-overlay'),
            drawerPanel: document.getElementById('drawer-panel'),
            drawerTrigger: document.getElementById('mobile-menu-trigger'),
            drawerClose: document.getElementById('drawer-close'),
            loadingIndicator: document.getElementById('loading-indicator')
        };

        // --- Initialization ---
        async function init() {
            try {
                // Fetch Payload
                const response = await fetch(RTQ_PAPERS_PAYLOAD_PATH);
                if (!response.ok) throw new Error("Fetch failed");
                payload = await response.json();

                // Populate Selector
                if (payload.papers && payload.papers.length > 0) {
                    dom.paperSelect.innerHTML = payload.papers.map(p => 
                        `<option value="${p.key}">${p.label}</option>`
                    ).join('');
                    
                    // Initial Paper Load
                    loadPaper(payload.papers[0].key);
                    
                    // Event Listener
                    dom.paperSelect.addEventListener('change', (e) => {
                        loadPaper(e.target.value);
                    });
                } else {
                    renderError();
                }

                dom.loadingIndicator.style.display = 'none';
                lucide.createIcons();

            } catch (e) {
                console.error(e);
                renderError();
            }
        }

        function renderError() {
            dom.paperContent.innerHTML = `<div class="p-8 text-center font-bold text-red-700 bg-red-50 border border-red-200 rounded">PAPERS PAYLOAD MISSING</div>`;
            dom.loadingIndicator.style.display = 'none';
        }

        // --- Paper Loading & Rendering ---
        function loadPaper(key) {
            currentPaperKey = key;
            const paper = payload.papers.find(p => p.key === key);
            if (!paper) return;

            // Reset Expanded States based on paper defaults
            const defaultExpand = paper.defaults?.expandedAll !== false;
            
            // Generate Content HTML
            const contentHtml = `
                <div class="bg-paper shadow-sm min-h-[500px] border border-divider pb-20">
                    ${renderPaperBody(paper, defaultExpand)}
                </div>
            `;
            
            dom.paperContent.innerHTML = contentHtml;

            // Generate Navigation
            const navHtml = renderNavigation(paper);
            dom.desktopNav.innerHTML = navHtml;
            dom.mobileNav.innerHTML = navHtml;

            // Post-Render: KaTeX & Interactions
            requestAnimationFrame(() => {
                // Render Math
                renderMathInElement(dom.paperContent, {
                    delimiters: [
                        {left: '$$', right: '$$', display: true},
                        {left: '$', right: '$', display: false}
                    ],
                    throwOnError: false
                });

                // Attach Disclosure Listeners
                attachDisclosureListeners();

                // Attach Nav Listeners (smooth scroll)
                attachNavListeners();

                // Re-init Icons
                lucide.createIcons();
            });
        }

        // --- Rendering Logic (Recursive) ---

        function renderPaperBody(paper, defaultExpand) {
            // Check for sections
            if (paper.sections) {
                return paper.sections.map(section => `
                    <div class="section-block">
                        ${section.label && section.label.trim() !== "" ? `
                            <div class="px-8 pt-8 pb-4 border-b border-divider/50">
                                <h2 class="text-xl font-bold text-secondary-custom">${section.label}</h2>
                            </div>
                        ` : ''}
                        <div class="question-list">
                            ${section.questions.map(q => renderQuestionNode(q, defaultExpand, 0)).join('')}
                        </div>
                    </div>
                `).join('<div class="h-px bg-divider my-8"></div>');
            } 
            
            // Flat list
            else if (paper.questions) {
                return `
                    <div class="question-list pt-8">
                        ${paper.questions.map(q => renderQuestionNode(q, defaultExpand, 0)).join('')}
                    </div>
                `;
            }
            return '';
        }

        function renderQuestionNode(node, defaultExpand, depth) {
            // Unique ID for toggle state
            const uId = `q-${node.id.replace(/[^a-zA-Z0-9]/g, '-')}-${Math.random().toString(36).substr(2, 9)}`;
            
            // Determine contents
            const hasSolutionBlock = !!node.solutionBlock;
            const hasAnswer = hasSolutionBlock && !!node.solutionBlock.answer;
            const hasDetails = hasSolutionBlock && !!node.solutionBlock.solutionDetails;
            
            // Default visibility
            const isExpanded = defaultExpand; // Local state handled via DOM toggle logic usually, but here we render initial state
            
            // Indentation class based on depth (visual hierarchy only, no layout boxing)
            const indentClass = depth > 0 ? `pl-0 md:pl-${Math.min(depth * 6, 12)}` : '';
            const separatorClass = depth === 0 ? 'border-b border-divider/30 pb-12 mb-12 last:border-0' : 'pb-6 mb-6';
            
            // Render parts
            const questionHtml = md.render(node.question || '');
            
            let solutionBlockHtml = '';
            if (hasSolutionBlock) {
                // Answer
                let answerHtml = '';
                if (hasAnswer) {
                    answerHtml = `
                        <div class="mt-6 mb-4">
                            <span class="text-sm font-bold text-secondary-custom uppercase tracking-wide block mb-1">Answer</span>
                            <div class="text-primary-custom md-content font-medium">
                                ${md.render(node.solutionBlock.answer)}
                            </div>
                        </div>
                    `;
                }

                // Solution Details
                let detailsHtml = '';
                if (hasDetails) {
                    const details = node.solutionBlock.solutionDetails;
                    
                    // Subsections
                    const keepInMind = details.keepInMind ? `
                        <div class="mb-6">
                            <div class="flex items-center gap-2 mb-2 text-secondary-custom font-bold text-sm">
                                <i data-lucide="lightbulb" class="w-4 h-4"></i>
                                <span>Keep in mind</span>
                            </div>
                            <div class="md-content text-secondary-custom text-sm">
                                ${md.render(details.keepInMind)}
                            </div>
                        </div>
                    ` : '';

                    const formulas = details.formulasUsed ? `
                        <div class="mb-6">
                            <div class="text-secondary-custom font-bold text-sm mb-2">Formulas used</div>
                            <div class="md-content text-sm text-secondary-custom">
                                ${md.render(details.formulasUsed)}
                            </div>
                        </div>
                    ` : '';

                    const working = details.working ? `
                        <div class="mb-6">
                            <div class="text-secondary-custom font-bold text-sm mb-2">Working</div>
                            <div class="md-content text-primary-custom">
                                ${md.render(details.working)}
                            </div>
                        </div>
                    ` : '';

                    const altWorking = details.alternativeWorking ? details.alternativeWorking.map((alt, idx) => `
                        <div class="mt-8 pt-6 border-t border-divider/50">
                            <div class="text-secondary-custom font-bold text-sm mb-2">Alternative working</div>
                            <div class="md-content text-primary-custom">
                                ${md.render(alt)}
                            </div>
                        </div>
                    `).join('') : '';

                    // Wrapper
                    detailsHtml = `
                        <div class="mt-4">
                            <button class="toggle-btn flex items-center gap-1.5 text-accent hover:text-primary-custom text-sm font-medium transition-colors focus:outline-none" 
                                    data-target="${uId}" 
                                    aria-expanded="${isExpanded}">
                                <span class="btn-text">${isExpanded ? 'Hide working' : 'Show working'}</span>
                                <i data-lucide="chevron-down" class="w-4 h-4 transition-transform duration-200 ${isExpanded ? 'rotate-180' : ''}"></i>
                            </button>
                            
                            <div id="${uId}" class="reveal-content mt-4 bg-wash rounded-sm p-4 border border-divider/20 ${isExpanded ? '' : 'hidden'}">
                                ${keepInMind}
                                ${formulas}
                                ${working}
                                ${altWorking}
                            </div>
                        </div>
                    `;
                }

                if (hasAnswer || hasDetails) {
                    solutionBlockHtml = `
                        <div class="mt-4 pt-2">
                            ${answerHtml}
                            ${detailsHtml}
                        </div>
                    `;
                }
            }

            // Children
            let childrenHtml = '';
            if (node.children && node.children.length > 0) {
                childrenHtml = `
                    <div class="mt-6 ml-4 md:ml-8 pl-4 border-l-2 border-divider/30">
                        ${node.children.map(child => renderQuestionNode(child, defaultExpand, depth + 1)).join('')}
                    </div>
                `;
            }

            // Question Node Assembly
            // NOTE: ID used for anchor navigation
            return `
                <div id="anchor-${node.id}" class="relative px-4 md:px-8 ${separatorClass}">
                    <div class="flex flex-col gap-1">
                        <div class="text-secondary-custom font-semibold text-sm mb-1">${node.id}</div>
                        <div class="md-content text-lg text-primary-custom font-medium leading-relaxed">
                            ${questionHtml}
                        </div>
                    </div>
                    ${solutionBlockHtml}
                    ${childrenHtml}
                </div>
            `;
        }

        // --- Navigation Rendering ---
        function renderNavigation(paper) {
            let html = '';
            
            // Helper for recursive nav items
            const renderItems = (nodes) => {
                return nodes.map(node => {
                    // Visual hierarchy via font size/opacity, flat structure
                    // Using data-target for scroll
                    let itemHtml = `
                        <a href="#anchor-${node.id}" class="nav-item nav-link" data-id="${node.id}">
                            ${node.id}
                        </a>
                    `;
                    if (node.children && node.children.length > 0) {
                        itemHtml += renderItems(node.children);
                    }
                    return itemHtml;
                }).join('');
            };

            if (paper.sections) {
                html = paper.sections.map(section => `
                    <div class="nav-section mb-4">
                        ${section.label && section.label.trim() !== "" ? `<div class="nav-section-label">${section.label}</div>` : ''}
                        ${renderItems(section.questions)}
                    </div>
                `).join('');
            } else if (paper.questions) {
                html = `<div class="mt-4">${renderItems(paper.questions)}</div>`;
            }
            
            return html;
        }

        // --- Interaction Handlers ---

        function attachDisclosureListeners() {
            document.querySelectorAll('.toggle-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const targetId = btn.getAttribute('data-target');
                    const targetEl = document.getElementById(targetId);
                    const isExpanded = btn.getAttribute('aria-expanded') === 'true';
                    const textSpan = btn.querySelector('.btn-text');
                    const icon = btn.querySelector('i');

                    // Toggle
                    if (isExpanded) {
                        targetEl.classList.add('hidden');
                        btn.setAttribute('aria-expanded', 'false');
                        textSpan.textContent = 'Show working';
                        icon.style.transform = 'rotate(0deg)';
                    } else {
                        targetEl.classList.remove('hidden');
                        btn.setAttribute('aria-expanded', 'true');
                        textSpan.textContent = 'Hide working';
                        icon.style.transform = 'rotate(180deg)';
                    }
                });
            });
        }

        function attachNavListeners() {
            // Intersection Observer for Active State
            const observerOptions = {
                root: null,
                rootMargin: '-10% 0px -80% 0px', // Active when near top
                threshold: 0
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const id = entry.target.id.replace('anchor-', '');
                        updateActiveNav(id);
                    }
                });
            }, observerOptions);

            // Observe all question anchors
            document.querySelectorAll('[id^="anchor-"]').forEach(el => observer.observe(el));

            // Smooth Scroll Click
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const targetId = `anchor-${link.getAttribute('data-id')}`;
                    const targetEl = document.getElementById(targetId);
                    if (targetEl) {
                        // Offset for sticky header
                        const headerOffset = 80;
                        const elementPosition = targetEl.getBoundingClientRect().top;
                        const offsetPosition = elementPosition + window.pageYOffset - headerOffset;
                        
                        window.scrollTo({
                            top: offsetPosition,
                            behavior: "smooth"
                        });
                        
                        // Close drawer on mobile
                        closeDrawer();
                    }
                });
            });
        }

        function updateActiveNav(id) {
            // Remove active class from all
            document.querySelectorAll('.nav-link').forEach(el => el.classList.remove('active'));
            // Add to current
            const activeLinks = document.querySelectorAll(`.nav-link[data-id="${id}"]`);
            activeLinks.forEach(el => {
                el.classList.add('active');
                // Optional: Scroll nav rail to keep active in view
                if (window.innerWidth >= 1024) { // Desktop only
                   // Simple scroll into view logic if needed, kept simple for now
                }
            });
        }

        // --- Mobile Drawer Logic ---
        function openDrawer() {
            dom.drawerOverlay.classList.add('open');
            dom.drawerPanel.classList.add('open');
            document.body.style.overflow = 'hidden'; // Lock body scroll
        }

        function closeDrawer() {
            dom.drawerOverlay.classList.remove('open');
            dom.drawerPanel.classList.remove('open');
            document.body.style.overflow = '';
        }

        dom.drawerTrigger.addEventListener('click', openDrawer);
        dom.drawerClose.addEventListener('click', closeDrawer);
        dom.drawerOverlay.addEventListener('click', closeDrawer);

        // --- Boot ---
        init();

    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
  <!-- RTQ_RUN {"generator":"rtq-prototype-batch","model":"gemini-3-pro-preview","prefix":"gemini.stage-12.1","variant":"AD","indexWithinVariant":"407","totalWithinVariant":"440","hueFamily":"","intensityMode":"","primaryHueFamily":"purple","secondaryHueFamily":"amber","dualIntensityMode":"dual_high_chroma_surfaces","timestamp":"2026-01-11T00:39:13.279Z"} -->
  <meta name="rtq-run" content='{&quot;generator&quot;:&quot;rtq-prototype-batch&quot;,&quot;model&quot;:&quot;gemini-3-pro-preview&quot;,&quot;prefix&quot;:&quot;gemini.stage-12.1&quot;,&quot;variant&quot;:&quot;AD&quot;,&quot;indexWithinVariant&quot;:&quot;407&quot;,&quot;totalWithinVariant&quot;:&quot;440&quot;,&quot;hueFamily&quot;:&quot;&quot;,&quot;intensityMode&quot;:&quot;&quot;,&quot;primaryHueFamily&quot;:&quot;purple&quot;,&quot;secondaryHueFamily&quot;:&quot;amber&quot;,&quot;dualIntensityMode&quot;:&quot;dual_high_chroma_surfaces&quot;,&quot;timestamp&quot;:&quot;2026-01-11T00:39:13.279Z&quot;}'>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RTQ Maths Paper Solution Viewer (Stage 6)</title>

    <!-- Tailwind CSS (via CDN) -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Markdown-it (via CDN) - SRI disabled -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/markdown-it/13.0.1/markdown-it.min.js"></script>

    <!-- KaTeX (via CDN) - SRI disabled per Stage 6 baseline -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/contrib/auto-render.min.js"></script>

    <!-- Lucide Icons (via CDN) -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- ColorLab D: Dual Accent Palette (dual_high_chroma_surfaces) Setup -->
    <script>
        // Defaults if template variables are not substituted
        let primaryHue = 250; // Blue
        let secondaryHue = 85; // Amber
        
        // Handle template placeholders or Run Config overrides if present
        const pVal = "{{RTQ_COLORLAB_DUAL_HUE_PRIMARY}}";
        const sVal = "{{RTQ_COLORLAB_DUAL_HUE_SECONDARY}}";
        
        const hueMap = {
            'blue': 250, 'green': 150, 'purple': 290, 'red': 25, 
            'amber': 85, 'cyan': 190, 'teal': 170, 'pink': 350
        };

        if (pVal && hueMap[pVal]) primaryHue = hueMap[pVal];
        if (sVal && hueMap[sVal]) secondaryHue = hueMap[sVal];

        // Ensure distinctness
        if (primaryHue === secondaryHue) {
            secondaryHue = (primaryHue + 120) % 360; 
        }

        // Mode: dual_high_chroma_surfaces (Authoritative Light Mode)
        // Rules:
        // 1. Two surfaces C [0.06..0.12]
        // 2. Remaining surface C [0.03..0.07]
        // 3. Wash C [0.05..0.10]
        // 4. Text C <= 0.015
        // 5. Primary Accent C [0.12..0.20]
        // 6. Secondary Accent C [0.10..0.18]

        const colors = {
            '--c-page': `oklch(0.93 0.06 ${primaryHue})`,   // High chroma surface 1
            '--c-frame': `oklch(0.91 0.06 ${primaryHue})`,  // High chroma surface 2
            '--c-paper': `oklch(0.98 0.03 ${primaryHue})`,  // Quieter surface
            '--c-wash': `oklch(0.95 0.06 ${primaryHue})`,   // Solution wash
            '--c-txt-pri': `oklch(0.20 0.015 ${primaryHue})`,
            '--c-txt-sec': `oklch(0.45 0.015 ${primaryHue})`,
            '--c-border': `oklch(0.85 0.02 ${primaryHue})`,
            '--c-acc-pri': `oklch(0.55 0.18 ${primaryHue})`,
            '--c-acc-sec': `oklch(0.65 0.16 ${secondaryHue})`,
            '--c-focus': `oklch(0.55 0.18 ${primaryHue})`
        };

        // Inject CSS Variables
        const style = document.createElement('style');
        let cssVars = ':root {';
        for (const [key, val] of Object.entries(colors)) {
            cssVars += `${key}: ${val};`;
        }
        cssVars += '}';
        style.innerHTML = cssVars;
        document.head.appendChild(style);

        // Tailwind Config
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        page: 'var(--c-page)',
                        frame: 'var(--c-frame)',
                        paper: 'var(--c-paper)',
                        wash: 'var(--c-wash)',
                        txt: {
                            pri: 'var(--c-txt-pri)',
                            sec: 'var(--c-txt-sec)'
                        },
                        border: {
                            DEFAULT: 'var(--c-border)'
                        },
                        accent: {
                            pri: 'var(--c-acc-pri)',
                            sec: 'var(--c-acc-sec)'
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    }
                }
            }
        }
    </script>

    <style>
        /* Base Reset & Typography */
        body {
            background-color: var(--c-page);
            color: var(--c-txt-pri);
            font-family: 'Inter', system-ui, sans-serif;
            -webkit-font-smoothing: antialiased;
            overflow-y: scroll; /* Force vertical scrollbar to prevent layout shifts */
        }

        /* Focus styles */
        :focus-visible {
            outline: 2px solid var(--c-focus);
            outline-offset: 2px;
        }

        /* Scrollbar Hiding for Nav (Stage 3 Add-on) */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        /* Markdown Content Styles (Paper-like, calm) */
        .prose p {
            margin-bottom: 0.75em;
            line-height: 1.6;
        }
        .prose ul {
            list-style-type: disc;
            padding-left: 1.25em;
            margin-bottom: 0.75em;
        }
        .prose ol {
            list-style-type: decimal;
            padding-left: 1.25em;
            margin-bottom: 0.75em;
        }
        .prose table {
            width: 100%;
            border-collapse: collapse;
            margin: 1em 0;
            font-size: 0.95em;
        }
        .prose th, .prose td {
            border: 1px solid var(--c-border);
            padding: 0.5em 0.75em;
            text-align: left;
        }
        .prose th {
            font-weight: 600;
            color: var(--c-txt-pri);
        }

        /* KaTeX Overrides & Containment (Stage 6) */
        .katex-display {
            overflow-x: auto;
            max-width: 100%;
            padding: 0.5em 0;
            margin: 0.5em 0;
            /* Scrollbar for math blocks on mobile */
            scrollbar-width: thin; 
            scrollbar-color: var(--c-border) transparent;
        }
        .katex-display::-webkit-scrollbar {
            height: 4px;
        }
        .katex-display::-webkit-scrollbar-thumb {
            background-color: var(--c-border);
            border-radius: 2px;
        }
        
        /* Inline KaTeX: No background allowed */
        .katex:not(.katex-display) {
            background-color: transparent !important;
        }

        /* Mobile Drawer Transitions */
        .drawer-enter { transform: translateX(-100%); }
        .drawer-enter-active { transform: translateX(0); transition: transform 0.3s ease-out; }
        .drawer-exit { transform: translateX(0); }
        .drawer-exit-active { transform: translateX(-100%); transition: transform 0.2s ease-in; }

        /* Animation for Solution Details */
        details > summary {
            list-style: none;
        }
        details > summary::-webkit-details-marker {
            display: none;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center py-4 md:py-8 px-4">

    <!-- Top Controls Region -->
    <div class="w-full max-w-6xl mb-6 flex justify-between items-center z-20">
        <div class="flex items-center gap-4">
            <!-- Paper Selector -->
            <select id="paper-selector" class="bg-paper border border-border rounded px-3 py-2 text-sm font-medium text-txt-pri focus:border-accent-pri focus:ring-0 cursor-pointer shadow-sm">
                <option>Loading...</option>
            </select>
        </div>

        <!-- Mobile Jump To Trigger -->
        <button id="mobile-jump-btn" class="md:hidden flex items-center gap-2 text-sm font-medium text-accent-pri">
            <span>Jump to</span>
            <i data-lucide="menu" class="w-4 h-4"></i>
        </button>
    </div>

    <!-- DocumentFrameShell -->
    <div class="w-full max-w-6xl flex-1 flex flex-col md:flex-row relative rounded-sm overflow-hidden bg-frame shadow-sm border border-border min-h-[80vh]">
        
        <!-- Desktop Navigation Rail (Sticky) -->
        <aside class="hidden md:block w-64 bg-frame border-r border-border shrink-0">
            <div class="sticky top-0 h-[calc(100vh-4rem)] overflow-y-auto no-scrollbar py-6 px-4">
                <nav id="desktop-nav-list" class="space-y-1">
                    <!-- Generated Nav Items -->
                </nav>
            </div>
        </aside>

        <!-- Paper Content Column -->
        <main class="flex-1 bg-paper relative">
            <div id="paper-content" class="max-w-3xl mx-auto py-8 px-6 md:px-12 min-h-full">
                <!-- Generated Content -->
                <div class="flex items-center justify-center h-64 text-txt-sec animate-pulse">
                    Loading Paper...
                </div>
            </div>
        </main>

    </div>

    <!-- Mobile Navigation Drawer -->
    <div id="mobile-drawer-overlay" class="fixed inset-0 bg-black/20 z-40 hidden backdrop-blur-[1px]" aria-hidden="true"></div>
    <div id="mobile-drawer" class="fixed inset-y-0 left-0 w-64 bg-paper z-50 transform -translate-x-full transition-transform duration-300 shadow-xl flex flex-col border-r border-border">
        <div class="p-4 border-b border-border flex justify-between items-center bg-paper">
            <span class="font-bold text-txt-pri">Jump to</span>
            <button id="drawer-close-btn" class="text-txt-sec hover:text-txt-pri p-1">
                <i data-lucide="x" class="w-5 h-5"></i>
            </button>
        </div>
        <nav id="mobile-nav-list" class="flex-1 overflow-y-auto p-4 space-y-1">
            <!-- Generated Mobile Nav Items -->
        </nav>
    </div>

    <!-- MAIN SCRIPT -->
    <script>
        // --- STAGE 0: CONSTANTS ---
        const RTQ_PAPERS_PAYLOAD_PATH = "../../../payload/rtq.papers.payload.v2.json";
        const RTQ_SHADCN_TOKEN_PROFILES_PATH = "../../../payload/rtq.shadcn.token.profiles.v1.json";

        // --- STATE ---
        let payload = null;
        let currentPaperId = null;
        let md = null;

        // --- MARKDOWN SETUP (Stage 6 Hardened) ---
        // html: true, linkify: true, breaks: false (critical)
        if (window.markdownit) {
            md = window.markdownit({
                html: true,
                linkify: true,
                breaks: false 
            });
            // Disable inline escape to preserve TeX backslashes
            md.inline.ruler.disable(['escape']);
        }

        // --- INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', async () => {
            lucide.createIcons();
            await loadPayload();
            setupInteractions();
        });

        async function loadPayload() {
            try {
                const response = await fetch(RTQ_PAPERS_PAYLOAD_PATH);
                if (!response.ok) throw new Error("Payload fetch failed");
                payload = await response.json();
                
                if (!payload || !payload.papers) throw new Error("Invalid payload structure");

                initPaperSelector();
            } catch (error) {
                console.error(error);
                renderFailure();
            }
        }

        function renderFailure() {
            const container = document.getElementById('paper-content');
            container.innerHTML = `
                <div class="flex flex-col items-center justify-center h-64 text-center">
                    <span class="text-lg font-bold text-txt-pri">PAPERS PAYLOAD MISSING</span>
                    <span class="text-sm text-txt-sec mt-2">Could not load from canonical path.</span>
                </div>
            `;
            document.getElementById('paper-selector').innerHTML = '<option>Error</option>';
            document.getElementById('paper-selector').disabled = true;
        }

        function initPaperSelector() {
            const selector = document.getElementById('paper-selector');
            selector.innerHTML = '';
            
            payload.papers.forEach((paper, index) => {
                const opt = document.createElement('option');
                opt.value = paper.key;
                opt.textContent = paper.label || paper.key;
                selector.appendChild(opt);
                
                // Default to first paper
                if (index === 0) currentPaperId = paper.key;
            });

            // Initial Render
            renderCurrentPaper();

            selector.addEventListener('change', (e) => {
                currentPaperId = e.target.value;
                renderCurrentPaper();
            });
        }

        function renderCurrentPaper() {
            const paper = payload.papers.find(p => p.key === currentPaperId);
            if (!paper) return;

            const container = document.getElementById('paper-content');
            container.innerHTML = ''; // Clear

            const navItems = [];

            // Handle Sections or Flat Questions
            if (paper.sections) {
                paper.sections.forEach((section, idx) => {
                    // Render Section Header if label exists
                    if (section.label && section.label.trim() !== "") {
                        // Section Header in Content
                        const secHeader = document.createElement('div');
                        secHeader.className = "mt-12 mb-6 pb-2 border-b border-border";
                        secHeader.innerHTML = `<h2 class="text-lg font-bold text-txt-pri">${escapeHtml(section.label)}</h2>`;
                        container.appendChild(secHeader);
                        
                        // Section Header in Nav
                        navItems.push({ type: 'section', label: section.label });
                    }
                    
                    // Render Questions
                    renderQuestionList(section.questions, container, navItems, paper.defaults);
                    
                    // Spacer between sections
                    if (idx < paper.sections.length - 1) {
                        const spacer = document.createElement('div');
                        spacer.className = "h-12"; 
                        container.appendChild(spacer);
                    }
                });
            } else if (paper.questions) {
                renderQuestionList(paper.questions, container, navItems, paper.defaults);
            }

            // Render Navigation
            renderNavigation(navItems);

            // Trigger KaTeX
            renderMathInElement(container, {
                delimiters: [
                    {left: '$$', right: '$$', display: true},
                    {left: '$', right: '$', display: false}
                ],
                throwOnError: false
            });

            // Re-init icons for new content
            lucide.createIcons();

            // Reset scroll
            window.scrollTo(0, 0);
        }

        function renderQuestionList(questions, container, navItems, defaults) {
            questions.forEach((q, idx) => {
                const node = renderQuestionNode(q, navItems, defaults, 0);
                container.appendChild(node);
                
                // Inter-question spacing (Top Level)
                if (idx < questions.length - 1) {
                    const spacer = document.createElement('div');
                    spacer.className = "h-16"; // Large vertical gap
                    container.appendChild(spacer);
                }
            });
        }

        function renderQuestionNode(node, navItems, defaults, depth) {
            // Push to nav if it has an ID
            if (node.id) {
                navItems.push({ type: 'question', id: node.id, depth: depth, elementId: `q-${node.id}` });
            }

            const wrapper = document.createElement('div');
            wrapper.id = `q-${node.id}`;
            wrapper.className = "group relative";

            // -- Question Body --
            // Question ID + Prompt
            const qBody = document.createElement('div');
            qBody.className = "mb-4";
            
            const idSpan = `<span class="font-bold text-txt-sec mr-2 select-none">${escapeHtml(node.id)}</span>`;
            const renderedPrompt = md ? md.render(node.question || "") : (node.question || "");
            
            // We wrap the prompt in a prose div, but inline the ID at the start visually
            qBody.innerHTML = `
                <div class="text-lg text-txt-pri leading-relaxed">
                    ${idSpan}
                    <div class="inline prose prose-neutral max-w-none text-txt-pri">
                        ${renderedPrompt}
                    </div>
                </div>
            `;
            wrapper.appendChild(qBody);

            // -- Solution Block (Optional) --
            if (node.solutionBlock) {
                const sb = node.solutionBlock;
                const hasAnswer = !!sb.answer;
                const hasDetails = !!sb.solutionDetails;

                const solBlockWrapper = document.createElement('div');
                solBlockWrapper.className = "ml-2 pl-4 border-l border-border/50"; // Subtle structural indentation

                // 1. Answer (Visible by default)
                if (hasAnswer) {
                    const ansDiv = document.createElement('div');
                    ansDiv.className = "mb-3 text-base";
                    const renderedAns = md ? md.render(sb.answer) : sb.answer;
                    ansDiv.innerHTML = `
                        <span class="text-xs font-bold uppercase tracking-wider text-txt-sec mr-2">Answer</span>
                        <div class="inline-block prose prose-neutral max-w-none text-txt-pri font-medium">
                            ${renderedAns}
                        </div>
                    `;
                    solBlockWrapper.appendChild(ansDiv);
                }

                // 2. Solution Details (Expandable)
                if (hasDetails) {
                    const details = sb.solutionDetails;
                    const isExpandedDefault = defaults?.expandedAll !== false;

                    const detailsContainer = document.createElement('div');
                    detailsContainer.className = "mt-2";

                    // Toggle Control
                    const toggleBtn = document.createElement('button');
                    toggleBtn.className = "flex items-center gap-1 text-sm font-medium text-accent-pri hover:underline focus:outline-none group-toggle";
                    toggleBtn.setAttribute('aria-expanded', isExpandedDefault);
                    
                    const updateToggleText = (expanded) => {
                        toggleBtn.innerHTML = `
                            <span>${expanded ? 'Hide working' : 'Show working'}</span>
                            <i data-lucide="chevron-${expanded ? 'up' : 'down'}" class="w-4 h-4"></i>
                        `;
                        lucide.createIcons({ root: toggleBtn });
                    };
                    updateToggleText(isExpandedDefault);

                    // Content Region
                    const contentRegion = document.createElement('div');
                    contentRegion.className = `mt-3 p-4 rounded-sm bg-wash text-sm text-txt-pri prose prose-sm max-w-none ${isExpandedDefault ? '' : 'hidden'}`;
                    
                    // Assemble Subsections
                    let innerHTML = '';

                    // A. Keep in mind
                    if (details.keepInMind) {
                        innerHTML += `
                            <div class="mb-4">
                                <div class="font-bold text-accent-sec mb-1 flex items-center gap-2">
                                    <i data-lucide="lightbulb" class="w-3 h-3"></i> Keep in mind
                                </div>
                                <div class="text-txt-sec">
                                    ${md ? md.render(details.keepInMind) : details.keepInMind}
                                </div>
                            </div>
                        `;
                    }

                    // B. Formulas Used
                    if (details.formulasUsed) {
                        innerHTML += `
                            <div class="mb-4">
                                <div class="font-bold text-txt-sec text-xs uppercase mb-1">Formulas used</div>
                                <div class="text-txt-sec">
                                    ${md ? md.render(details.formulasUsed) : details.formulasUsed}
                                </div>
                            </div>
                        `;
                    }

                    // C. Working
                    if (details.working) {
                        innerHTML += `
                            <div class="mb-4">
                                <div class="font-bold text-txt-sec text-xs uppercase mb-1">Working</div>
                                <div class="text-txt-pri">
                                    ${md ? md.render(details.working) : details.working}
                                </div>
                            </div>
                        `;
                    }

                    // D. Alternative Working
                    if (details.alternativeWorking && Array.isArray(details.alternativeWorking)) {
                        details.alternativeWorking.forEach((alt, i) => {
                            innerHTML += `
                                <div class="mt-6 pt-4 border-t border-border/50">
                                    <div class="font-bold text-txt-sec text-xs uppercase mb-1">Alternative working</div>
                                    <div class="text-txt-pri">
                                        ${md ? md.render(alt) : alt}
                                    </div>
                                </div>
                            `;
                        });
                    } else if (details.alternativeWorking) {
                         // String fallback
                         innerHTML += `
                                <div class="mt-6 pt-4 border-t border-border/50">
                                    <div class="font-bold text-txt-sec text-xs uppercase mb-1">Alternative working</div>
                                    <div class="text-txt-pri">
                                        ${md ? md.render(details.alternativeWorking) : details.alternativeWorking}
                                    </div>
                                </div>
                            `;
                    }

                    contentRegion.innerHTML = innerHTML;
                    
                    // Interaction
                    toggleBtn.onclick = () => {
                        const expanded = contentRegion.classList.contains('hidden');
                        if (expanded) {
                            contentRegion.classList.remove('hidden');
                        } else {
                            contentRegion.classList.add('hidden');
                        }
                        updateToggleText(expanded);
                    };

                    detailsContainer.appendChild(toggleBtn);
                    detailsContainer.appendChild(contentRegion);
                    solBlockWrapper.appendChild(detailsContainer);
                }

                wrapper.appendChild(solBlockWrapper);
            }

            // -- Children (Recursion) --
            if (node.children && node.children.length > 0) {
                const childrenContainer = document.createElement('div');
                childrenContainer.className = "mt-6 ml-0 md:ml-4"; // Indentation via margin
                
                node.children.forEach((child, idx) => {
                    const childNode = renderQuestionNode(child, navItems, defaults, depth + 1);
                    childrenContainer.appendChild(childNode);
                    
                    if (idx < node.children.length - 1) {
                         // Spacing between children
                         const spacer = document.createElement('div');
                         spacer.className = "h-8";
                         childrenContainer.appendChild(spacer);
                    }
                });
                wrapper.appendChild(childrenContainer);
            }

            return wrapper;
        }

        // --- NAVIGATION RENDERER ---
        function renderNavigation(items) {
            const deskList = document.getElementById('desktop-nav-list');
            const mobList = document.getElementById('mobile-nav-list');
            
            deskList.innerHTML = '';
            mobList.innerHTML = '';

            items.forEach(item => {
                if (item.type === 'section') {
                    // Section Header
                    const el = document.createElement('div');
                    el.className = "mt-4 mb-2 text-xs font-bold text-txt-sec uppercase tracking-wider px-2 select-none";
                    el.textContent = item.label;
                    
                    deskList.appendChild(el.cloneNode(true));
                    mobList.appendChild(el.cloneNode(true));
                } else {
                    // Question Link
                    const btn = document.createElement('button');
                    // Hierarchy via type scale/opacity logic (Stage 5.4.5)
                    // No visual indentation.
                    const isSub = item.depth > 0;
                    btn.className = `w-full text-left px-2 py-1 rounded text-sm transition-colors hover:bg-black/5 focus:bg-black/5 focus:outline-none ${isSub ? 'text-txt-sec font-normal text-xs' : 'text-txt-pri font-medium'}`;
                    btn.textContent = item.id;
                    
                    btn.onclick = () => {
                        const target = document.getElementById(item.elementId);
                        if (target) {
                            const offset = 100; // Header height approx
                            const bodyRect = document.body.getBoundingClientRect().top;
                            const elementRect = target.getBoundingClientRect().top;
                            const elementPosition = elementRect - bodyRect;
                            const offsetPosition = elementPosition - offset;

                            window.scrollTo({
                                top: offsetPosition,
                                behavior: "smooth"
                            });

                            // Mobile: Close drawer
                            toggleDrawer(false);
                        }
                    };

                    deskList.appendChild(btn);
                    mobList.appendChild(btn.cloneNode(true)); // Clone for mobile
                }
            });
        }

        // --- MOBILE DRAWER LOGIC ---
        const drawer = document.getElementById('mobile-drawer');
        const overlay = document.getElementById('mobile-drawer-overlay');
        const jumpBtn = document.getElementById('mobile-jump-btn');
        const closeBtn = document.getElementById('drawer-close-btn');

        function toggleDrawer(show) {
            if (show) {
                drawer.classList.remove('-translate-x-full');
                overlay.classList.remove('hidden');
                document.body.style.overflow = 'hidden';
            } else {
                drawer.classList.add('-translate-x-full');
                overlay.classList.add('hidden');
                document.body.style.overflow = '';
            }
        }

        jumpBtn.onclick = () => toggleDrawer(true);
        closeBtn.onclick = () => toggleDrawer(false);
        overlay.onclick = () => toggleDrawer(false);

        function setupInteractions() {
            // Scroll spy could be added here for active nav state, 
            // but specific instructions prioritized weight-only indicator which we handled in nav render.
            // Keeping it simple for the harness.
        }

        function escapeHtml(text) {
            if (!text) return "";
            return text
                .replace(/&/g, "&amp;")
                .replace(/</g, "&lt;")
                .replace(/>/g, "&gt;")
                .replace(/"/g, "&quot;")
                .replace(/'/g, "&#039;");
        }
    </script>
</body>
</html>

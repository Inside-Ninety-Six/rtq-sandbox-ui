<!DOCTYPE html>
<html lang="en">
<head>
  <!-- RTQ_RUN {"generator":"rtq-prototype-batch","model":"gemini-3-pro-preview","prefix":"gemini.stage-12.1","variant":"AD","indexWithinVariant":"117","totalWithinVariant":"440","hueFamily":"","intensityMode":"","primaryHueFamily":"purple","secondaryHueFamily":"pink","dualIntensityMode":"dual_accent_only","timestamp":"2026-01-10T07:12:08.405Z"} -->
  <meta name="rtq-run" content='{&quot;generator&quot;:&quot;rtq-prototype-batch&quot;,&quot;model&quot;:&quot;gemini-3-pro-preview&quot;,&quot;prefix&quot;:&quot;gemini.stage-12.1&quot;,&quot;variant&quot;:&quot;AD&quot;,&quot;indexWithinVariant&quot;:&quot;117&quot;,&quot;totalWithinVariant&quot;:&quot;440&quot;,&quot;hueFamily&quot;:&quot;&quot;,&quot;intensityMode&quot;:&quot;&quot;,&quot;primaryHueFamily&quot;:&quot;purple&quot;,&quot;secondaryHueFamily&quot;:&quot;pink&quot;,&quot;dualIntensityMode&quot;:&quot;dual_accent_only&quot;,&quot;timestamp&quot;:&quot;2026-01-10T07:12:08.405Z&quot;}'>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RTQ Maths Paper Solution Viewer</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- KaTeX CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">

    <!-- KaTeX JS -->
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>

    <!-- Markdown-it -->
    <script src="https://cdn.jsdelivr.net/npm/markdown-it@14.0.0/dist/markdown-it.min.js"></script>

    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        /* 
           COLORLAB D: DUAL-ACCENT PALETTE (Mode 1: dual_accent_only) 
           Hue Primary: Blue (264)
           Hue Secondary: Amber (85) - Fallback default
        */
        :root {
            /* Hues */
            --hue-p: 264;
            --hue-s: 85;

            /* Surfaces (C <= 0.015) */
            --col-page: oklch(0.985 0.002 var(--hue-p));
            --col-frame: oklch(0.985 0.002 var(--hue-p));
            --col-paper: oklch(1.0 0 0); /* Pure white for paper surface clarity */
            --col-wash: oklch(0.97 0.005 var(--hue-p)); /* Very subtle wash */

            /* Text (C <= 0.010) */
            --col-txt-pri: oklch(0.20 0.01 var(--hue-p));
            --col-txt-sec: oklch(0.45 0.01 var(--hue-p));
            --col-txt-ter: oklch(0.60 0.005 var(--hue-p));

            /* Accents */
            /* Primary (C in [0.08 .. 0.14]) -> used for links, focus, disclosure text */
            --col-acc-pri: oklch(0.55 0.13 var(--hue-p)); 
            
            /* Secondary (C in [0.06 .. 0.12]) -> single supplementary role */
            --col-acc-sec: oklch(0.75 0.11 var(--hue-s));

            /* Lines/Dividers */
            --col-line: oklch(0.92 0.005 var(--hue-p));
        }

        body {
            background-color: var(--col-page);
            color: var(--col-txt-pri);
            font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            -webkit-font-smoothing: antialiased;
        }

        /* Scrollbar hiding utilities */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        /* KaTeX Overrides & Containment */
        .katex-display {
            overflow-x: auto;
            overflow-y: hidden;
            padding-top: 0.2em;
            padding-bottom: 0.2em;
            -webkit-overflow-scrolling: touch;
            max-width: 100%;
        }
        
        /* Inline KaTeX transparency rule */
        .katex {
            background-color: transparent !important;
        }

        /* Markdown Table Styling */
        .md-content table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 1rem;
            font-size: 0.95em;
        }
        .md-content th {
            text-align: left;
            border-bottom: 1px solid var(--col-line);
            padding: 0.5rem;
            font-weight: 600;
        }
        .md-content td {
            border-bottom: 1px solid var(--col-line);
            padding: 0.5rem;
            vertical-align: top;
        }
        .md-content tr:last-child td {
            border-bottom: none;
        }
        
        /* Markdown List Styling */
        .md-content ul {
            list-style-type: disc;
            padding-left: 1.5rem;
            margin-bottom: 0.5rem;
        }
        .md-content ol {
            list-style-type: decimal;
            padding-left: 1.5rem;
            margin-bottom: 0.5rem;
        }
        .md-content p {
            margin-bottom: 0.75rem;
            line-height: 1.6;
        }
        .md-content p:last-child {
            margin-bottom: 0;
        }

        /* Focus Styles */
        :focus-visible {
            outline: 2px solid var(--col-acc-pri);
            outline-offset: 2px;
            border-radius: 2px;
        }
    </style>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        page: 'var(--col-page)',
                        frame: 'var(--col-frame)',
                        paper: 'var(--col-paper)',
                        wash: 'var(--col-wash)',
                        txt: {
                            pri: 'var(--col-txt-pri)',
                            sec: 'var(--col-txt-sec)',
                            ter: 'var(--col-txt-ter)',
                        },
                        acc: {
                            pri: 'var(--col-acc-pri)',
                            sec: 'var(--col-acc-sec)',
                        },
                        line: 'var(--col-line)',
                    },
                    spacing: {
                        'r-sm': '0.5rem',
                        'r-md': '1rem',
                        'r-lg': '2rem',
                        'r-xl': '4rem', // Largest unit (between top level questions)
                    }
                }
            }
        }
    </script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        /************************************************************************
         * STAGE 0: CONSTANTS
         ************************************************************************/
        const RTQ_PAPERS_PAYLOAD_PATH = "../../../payload/rtq.papers.payload.v2.json";
        const RTQ_SHADCN_TOKEN_PROFILES_PATH = "../../../payload/rtq.shadcn.token.profiles.v1.json";

        /************************************************************************
         * UTILS & MARKDOWN CONFIG
         ************************************************************************/
        // Markdown renderer configuration invariants
        const md = window.markdownit
            ? window.markdownit({
                html: true, // allow inline SVG
                linkify: true,
                breaks: false, // MUST stay false
            })
            : null;

        if (md) {
            // Disable escape rule to preserve TeX backslashes
            md.inline.ruler.disable(['escape']);
        }

        // SVG Icons using Lucide strings (mapped to React components if needed, or simple SVGs)
        // Using simple SVGs for minimal dependencies in single file
        const ChevronRightIcon = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m9 18 6-6-6-6"/></svg>
        );
        const ChevronDownIcon = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m6 9 6 6 6-6"/></svg>
        );
        const MenuIcon = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/></svg>
        );
        const XIcon = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
        );
        const InfoIcon = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>
        );

        /************************************************************************
         * COMPONENTS
         ************************************************************************/

        // Markdown Content Component with KaTeX
        const MarkdownContent = React.memo(({ content, className = "", tag = "div" }) => {
            const containerRef = React.useRef(null);
            
            // 1. Render Markdown to HTML
            const htmlContent = React.useMemo(() => {
                if (!content || !md) return "";
                return md.render(content);
            }, [content]);

            // 2. Render KaTeX on the DOM node
            React.useLayoutEffect(() => {
                if (containerRef.current && window.renderMathInElement) {
                    window.renderMathInElement(containerRef.current, {
                        delimiters: [
                            {left: '$$', right: '$$', display: true},
                            {left: '$', right: '$', display: false}
                        ],
                        throwOnError: false,
                        trust: true // For inline HTML passthrough if needed within math
                    });
                }
            }, [htmlContent]);

            const Tag = tag;

            return (
                <Tag 
                    ref={containerRef}
                    className={`md-content ${className}`}
                    dangerouslySetInnerHTML={{ __html: htmlContent }}
                />
            );
        });

        // Navigation Item
        const NavItem = ({ id, isActive, onClick, depth = 0 }) => {
            // Hierarchy via type scale/opacity (Stage 5.4.5)
            // No indentation.
            const isSub = depth > 0;
            const textStyle = isSub ? "text-txt-sec text-sm" : "text-txt-pri text-base font-medium";
            const activeStyle = isActive 
                ? "text-acc-pri font-bold" 
                : "hover:text-txt-pri"; // Subtle hover
            
            return (
                <button 
                    onClick={onClick}
                    className={`w-full text-left py-1 block ${textStyle} ${activeStyle} transition-colors duration-200`}
                >
                    {id}
                </button>
            );
        };

        // Navigation List
        const NavigationList = ({ items, currentId, onJump, sections }) => {
            if (!items) return null;

            // Flatten logic for rendering
            // If sections exist, we render section headers.
            // Items are linear.
            
            // Helper to render linear list
            const renderLinear = (list) => (
                <div className="flex flex-col gap-0.5">
                    {list.map((item) => (
                        <NavItem 
                            key={item.uniqueKey} 
                            id={item.id} 
                            depth={item.depth}
                            isActive={currentId === item.uniqueKey}
                            onClick={() => onJump(item.uniqueKey)}
                        />
                    ))}
                </div>
            );

            if (sections && sections.length > 0) {
                return (
                    <div className="flex flex-col gap-6">
                        {sections.map((sec, idx) => (
                            <div key={idx} className="flex flex-col">
                                {sec.label && sec.label.trim() !== "" && (
                                    <div className="text-xs font-bold text-txt-ter uppercase tracking-wider mb-2 select-none">
                                        {sec.label}
                                    </div>
                                )}
                                {renderLinear(sec.items)}
                            </div>
                        ))}
                    </div>
                );
            }

            return renderLinear(items);
        };

        // Desktop Navigation Rail
        const DesktopNavRail = ({ navData, currentId, onJump }) => {
            return (
                <nav className="w-48 hidden lg:block flex-shrink-0 sticky top-4 h-[calc(100vh-2rem)] overflow-y-auto no-scrollbar pl-2 pr-4 border-r border-line/0"> 
                    {/* border-line/0 means invisible border structurally, purely for spacing if needed */}
                    <NavigationList 
                        items={navData.flatItems} 
                        sections={navData.sections}
                        currentId={currentId} 
                        onJump={onJump} 
                    />
                </nav>
            );
        };

        // Mobile Navigation Drawer
        const MobileNavDrawer = ({ isOpen, onClose, navData, currentId, onJump }) => {
            if (!isOpen) return null;

            return (
                <div className="fixed inset-0 z-50 flex justify-start">
                    {/* Scrim */}
                    <div 
                        className="absolute inset-0 bg-black/20 backdrop-blur-sm" 
                        onClick={onClose}
                    ></div>
                    
                    {/* Drawer */}
                    <div className="relative bg-page w-64 h-full shadow-xl flex flex-col border-r border-line">
                        <div className="flex items-center justify-between p-4 border-b border-line">
                            <h2 className="text-txt-pri font-bold text-lg">Jump to</h2>
                            <button onClick={onClose} className="p-2 text-txt-sec hover:text-txt-pri">
                                <XIcon className="w-6 h-6" />
                            </button>
                        </div>
                        <div className="flex-1 overflow-y-auto p-4">
                            <NavigationList 
                                items={navData.flatItems}
                                sections={navData.sections}
                                currentId={currentId}
                                onJump={(id) => {
                                    onJump(id);
                                    onClose();
                                }}
                            />
                        </div>
                    </div>
                </div>
            );
        };

        // Solution Details Block
        const SolutionDetailsRegion = ({ details, isExpanded }) => {
            if (!isExpanded) return null;

            const { keepInMind, formulasUsed, working, alternativeWorking } = details;

            return (
                <div className="mt-4 pt-4 border-t border-line/50 bg-wash -mx-4 px-4 sm:mx-0 sm:px-4 sm:rounded-sm pb-4 animate-in fade-in slide-in-from-top-1 duration-200">
                    
                    {/* Keep In Mind */}
                    {keepInMind && (
                        <div className="mb-6">
                            <div className="flex items-center gap-2 mb-2 text-txt-pri font-bold text-sm">
                                <InfoIcon className="w-4 h-4 text-txt-sec" />
                                <span>Keep in mind</span>
                            </div>
                            <MarkdownContent content={keepInMind} className="text-txt-sec text-sm" />
                        </div>
                    )}

                    {/* Formulas Used */}
                    {formulasUsed && (
                        <div className="mb-6">
                            <div className="mb-2 text-txt-pri font-bold text-sm">Formulas used</div>
                            <MarkdownContent content={formulasUsed} className="text-txt-sec text-sm" />
                        </div>
                    )}

                    {/* Working (Primary) */}
                    {working && (
                        <div className="mb-6">
                            <div className="mb-2 text-txt-pri font-bold text-sm">Working</div>
                            <MarkdownContent content={working} className="text-txt-pri text-base" />
                        </div>
                    )}

                    {/* Alternative Working */}
                    {alternativeWorking && Array.isArray(alternativeWorking) && alternativeWorking.map((alt, idx) => (
                        <div key={idx} className="mt-8 pt-4 border-t border-line/30">
                            <div className="mb-2 text-txt-pri font-bold text-sm">Alternative working</div>
                            <MarkdownContent content={alt} className="text-txt-pri text-base" />
                        </div>
                    ))}
                </div>
            );
        };

        // Question Node
        const QuestionNode = ({ node, depth = 0, paperDefaults }) => {
            const [isExpanded, setIsExpanded] = React.useState(paperDefaults?.expandedAll ?? true);
            const hasSolutionBlock = !!node.solutionBlock;
            const answer = node.solutionBlock?.answer;
            const solutionDetails = node.solutionBlock?.solutionDetails;
            const hasSolutionDetails = !!solutionDetails;

            // Unique ID for scrolling
            const domId = `q-${node.id}`; // Simple mapping, in real app might need uuid

            return (
                <div id={domId} className={`scroll-mt-24 group relative ${depth > 0 ? 'mt-6' : 'mb-16'}`}>
                    
                    {/* Question Body */}
                    <div className="flex gap-4">
                        {/* Identifier */}
                        <div className="flex-shrink-0 w-8 sm:w-12 text-txt-sec font-medium text-lg sm:text-xl select-none text-right pt-0.5">
                            {node.id}
                        </div>
                        
                        {/* Content Column */}
                        <div className="flex-1 min-w-0">
                            {/* Question Prompt */}
                            <div className="mb-6">
                                <MarkdownContent content={node.question} className="text-txt-pri text-lg sm:text-xl leading-relaxed" />
                            </div>

                            {/* Solution Block */}
                            {hasSolutionBlock && (
                                <div className="mt-6">
                                    {/* Answer */}
                                    {answer && (
                                        <div className="mb-4">
                                            <div className="text-xs font-bold text-txt-ter uppercase tracking-wider mb-1">Answer</div>
                                            <MarkdownContent content={answer} className="text-txt-pri font-medium text-lg" />
                                        </div>
                                    )}

                                    {/* Solution Details Toggle */}
                                    {hasSolutionDetails && (
                                        <div>
                                            <button 
                                                onClick={() => setIsExpanded(!isExpanded)}
                                                className="flex items-center gap-2 text-acc-pri font-medium text-sm hover:underline focus:outline-none focus-visible:ring-2 focus-visible:ring-acc-pri rounded-sm py-1"
                                            >
                                                <span>{isExpanded ? "Hide working" : "Show working"}</span>
                                                {isExpanded ? <ChevronDownIcon className="w-4 h-4" /> : <ChevronRightIcon className="w-4 h-4" />}
                                            </button>

                                            <SolutionDetailsRegion details={solutionDetails} isExpanded={isExpanded} />
                                        </div>
                                    )}
                                </div>
                            )}

                            {/* Children */}
                            {node.children && node.children.length > 0 && (
                                <div className="ml-0 sm:ml-4 border-l-2 border-line/0 pl-0">
                                    {node.children.map((child, idx) => (
                                        <QuestionNode 
                                            key={idx} 
                                            node={child} 
                                            depth={depth + 1} 
                                            paperDefaults={paperDefaults} 
                                        />
                                    ))}
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );
        };

        /************************************************************************
         * APP SHELL & LOGIC
         ************************************************************************/

        const App = () => {
            const [papers, setPapers] = React.useState([]);
            const [selectedPaperKey, setSelectedPaperKey] = React.useState(null);
            const [loading, setLoading] = React.useState(true);
            const [error, setError] = React.useState(false);
            const [mobileMenuOpen, setMobileMenuOpen] = React.useState(false);
            const [currentViewId, setCurrentViewId] = React.useState(null);

            // Fetch Payload
            React.useEffect(() => {
                fetch(RTQ_PAPERS_PAYLOAD_PATH)
                    .then(res => {
                        if (!res.ok) throw new Error("Failed to load");
                        return res.json();
                    })
                    .then(data => {
                        if (data && data.papers && Array.isArray(data.papers)) {
                            setPapers(data.papers);
                            if (data.papers.length > 0) {
                                setSelectedPaperKey(data.papers[0].key);
                            }
                        } else {
                            setError(true);
                        }
                        setLoading(false);
                    })
                    .catch(err => {
                        console.error(err);
                        setError(true);
                        setLoading(false);
                    });
            }, []);

            const currentPaper = React.useMemo(() => {
                return papers.find(p => p.key === selectedPaperKey);
            }, [papers, selectedPaperKey]);

            // Process Navigation Data
            const navData = React.useMemo(() => {
                if (!currentPaper) return { flatItems: [], sections: [] };

                const processNodes = (nodes, depth = 0, list = []) => {
                    nodes.forEach(node => {
                        list.push({ id: node.id, uniqueKey: `q-${node.id}`, depth });
                        if (node.children) processNodes(node.children, depth + 1, list);
                    });
                    return list;
                };

                // Sectioned Paper
                if (currentPaper.sections) {
                    const sections = currentPaper.sections.map(sec => ({
                        label: sec.label,
                        items: processNodes(sec.questions)
                    }));
                    // Create a complete flat list for scroll spy if needed, but structure preserves sections
                    const flatItems = sections.flatMap(s => s.items);
                    return { flatItems, sections };
                } 
                // Flat Paper
                else if (currentPaper.questions) {
                    const flatItems = processNodes(currentPaper.questions);
                    return { flatItems, sections: null };
                }
                return { flatItems: [], sections: [] };
            }, [currentPaper]);

            // Scroll Handler (Jump)
            const handleJump = (id) => {
                const el = document.getElementById(id);
                if (el) {
                    el.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    setCurrentViewId(id);
                }
            };

            // Intersection Observer for Current Nav State
            React.useEffect(() => {
                if (!navData.flatItems.length) return;

                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            setCurrentViewId(entry.target.id);
                        }
                    });
                }, { rootMargin: '-10% 0px -80% 0px' });

                navData.flatItems.forEach(item => {
                    const el = document.getElementById(item.uniqueKey);
                    if (el) observer.observe(el);
                });

                return () => observer.disconnect();
            }, [navData, selectedPaperKey]); // Re-run when paper changes

            // Render
            if (loading) return <div className="p-8 text-txt-sec">Loading papers...</div>;
            if (error) return <div className="p-8 text-txt-pri font-bold text-xl">PAPERS PAYLOAD MISSING</div>;

            return (
                <div className="min-h-screen flex flex-col">
                    {/* Top Controls Surface (Unified with Shell) */}
                    <header className="bg-frame border-b border-line sticky top-0 z-40">
                        <div className="max-w-6xl mx-auto px-4 md:px-8 h-16 flex items-center justify-between">
                            <div className="flex items-center gap-4">
                                {/* Paper Selector */}
                                <select 
                                    className="bg-white border border-line text-txt-pri text-sm rounded px-3 py-1.5 focus:outline-none focus:ring-2 focus:ring-acc-pri"
                                    value={selectedPaperKey || ""}
                                    onChange={(e) => setSelectedPaperKey(e.target.value)}
                                >
                                    {papers.map(p => (
                                        <option key={p.key} value={p.key}>{p.label}</option>
                                    ))}
                                </select>
                            </div>

                            {/* Mobile Jump Trigger */}
                            <button 
                                className="lg:hidden flex items-center gap-2 text-acc-pri font-medium text-sm"
                                onClick={() => setMobileMenuOpen(true)}
                            >
                                <span>Jump to</span>
                                <MenuIcon className="w-5 h-5" />
                            </button>
                        </div>
                    </header>

                    {/* DocumentFrameShell */}
                    <main className="flex-1 bg-frame">
                        <div className="max-w-6xl mx-auto px-4 md:px-8 py-8 flex items-start gap-8 lg:gap-16">
                            
                            {/* Left Column: Nav Rail (Desktop) */}
                            <DesktopNavRail 
                                navData={navData} 
                                currentId={currentViewId} 
                                onJump={handleJump} 
                            />

                            {/* Mobile Nav Drawer */}
                            <MobileNavDrawer 
                                isOpen={mobileMenuOpen} 
                                onClose={() => setMobileMenuOpen(false)} 
                                navData={navData} 
                                currentId={currentViewId} 
                                onJump={handleJump} 
                            />

                            {/* Right Column: Paper Content */}
                            <div className="flex-1 min-w-0 bg-paper shadow-sm border border-line/50 p-6 md:p-12 lg:p-16 rounded-sm min-h-[80vh]">
                                {currentPaper.sections ? (
                                    currentPaper.sections.map((sec, idx) => (
                                        <div key={idx} className="mb-12">
                                            {sec.label && (
                                                <div className="text-2xl font-bold text-txt-pri mb-8 pb-4 border-b border-line">
                                                    Section {sec.label}
                                                </div>
                                            )}
                                            {sec.questions.map((q) => (
                                                <QuestionNode 
                                                    key={q.id} 
                                                    node={q} 
                                                    paperDefaults={currentPaper.defaults} 
                                                />
                                            ))}
                                        </div>
                                    ))
                                ) : (
                                    currentPaper.questions.map((q) => (
                                        <QuestionNode 
                                            key={q.id} 
                                            node={q} 
                                            paperDefaults={currentPaper.defaults} 
                                        />
                                    ))
                                )}
                                <div className="h-32"></div> {/* Spacer for scroll bottom */}
                            </div>
                        </div>
                    </main>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
